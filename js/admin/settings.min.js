jQuery.fn.currencyFormat=function(){return this.each(function(){var n=this.value.split(".");n[1]&&2<n[1].length?(n[1]=n[1].substring(0,2),this.value=parseFloat(n.join("."))):this.value=this.value}),this},jQuery(document).ready(function(c){var n={responder:{handle:c(".wp_weixin-responder-section.wp_weixin-responder-field input"),content:c(".wp_weixin-responder-section:not(.wp_weixin-responder-field)")},proxy:{handle:c(".wp_weixin-proxy-section.wp_weixin-proxy-field input"),content:c(".wp_weixin-proxy-section:not(.wp_weixin-proxy-field)")}};c.each(n,function(n,e){e.handle.prop("checked")?e.content.show():e.content.hide(),e.handle.on("change",function(){c(this).prop("checked")?e.content.show():e.content.hide()})}),c("#wp_weixin_qr_amount").on("keyup",function(n){n.preventDefault(),c(this).currencyFormat()}),c(".qr-button").on("click",function(n){n.preventDefault();var e,i=c(this),t=c("#"+i.data("img")),o=c("#qr_url").val(),r=c("#wp_weixin_qr_amount").val(),a=c("#wp_weixin_qr_amount_fixed").prop("checked");(e=i.hasClass("qr-payment-button")?{amount:r,fixed:a,url:t.data("default_url")}:{url:o}).action="wp_weixin_get_qr",c.ajax({url:WpWeixin.ajax_url,type:"POST",data:e}).done(function(n){n.success?(t.attr("src",t.data("base_url")+n.data),t.css("visibility","visible"),t.parent().children("span").hide()):(t.css("visibility","hidden"),t.parent().children("span").show())}).fail(function(n,e){WpWeixin.debug&&window.console.log(e)})})});