jQuery(function(a){window.authListenerStartEvent=new CustomEvent("authlistenerstart"),window.authListenerStopEvent=new CustomEvent("authlistenerstop"),window.authScannerBeat=!1,window.addEventListener("authlistenerstart",function(){window.authScannerBeat=!0,function i(){window.authScannerBeat&&(window.authListener=setTimeout(function(){var t=a("#auth_hash").val(),e=0<t.length,n={action:"wp_weixin_auth_heartbeat_pulse",hash:t};e&&a.post(WP_WeixinAuthHeartBeat.ajax_url,n,function(t){t.success?t.data&&!t.data.auth?window.scanAuthFailureTrigger(t.data):t.data?window.scanAuthSuccessTrigger(t.data):(window.beatAuthSuccessTrigger(t.data),i()):window.scanAuthFailureTrigger({auth:!1,error:t.data})}).fail(function(t,e){window.beatAuthFailureTrigger(e),i()})},WP_WeixinAuthHeartBeat.heartbeatFreq))}()}),window.addEventListener("authlistenerstop",function(){window.authScannerBeat=!1,clearTimeout(window.authListener)}),window.authListenerStart=function(){window.dispatchEvent(window.authListenerStartEvent)},window.authListenerStop=function(){window.dispatchEvent(window.authListenerStopEvent)},window.scanAuthSuccessTrigger=function(t){window.scanSuccess=new CustomEvent("authsuccess",{detail:t}),window.dispatchEvent(window.scanSuccess)},window.scanAuthFailureTrigger=function(t){window.scanFailure=new CustomEvent("authfailure",{detail:t}),window.dispatchEvent(window.scanFailure)},window.beatAuthSuccessTrigger=function(t){window.beatSuccess=new CustomEvent("beatauthsuccess",{detail:t}),window.dispatchEvent(window.beatSuccess)},window.beatAuthFailureTrigger=function(t){window.beatFailure=new CustomEvent("beatauthfailure",{detail:t}),window.dispatchEvent(window.beatFailure)},window.registerAuthScanSuccessListener=function(e){window.addEventListener("authsuccess",function(t){"function"==typeof e&&e(t.detail)})},window.registerAuthScanFailureListener=function(e){window.addEventListener("authfailure",function(t){"function"==typeof e&&e(t.detail)})},window.registerAuthBeatSuccessListener=function(e){window.addEventListener("beatauthsuccess",function(t){"function"==typeof e&&e(t.detail)})},window.registerAuthBeatFailureListener=function(e){window.addEventListener("beatauthfailure",function(t){"function"==typeof e&&e(t.detail)})}});